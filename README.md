# AiAdventChallenge

Интерактивный терминал для общения с AI-агентом через Z.AI API. Проект демонстрирует работу с LLM, включая диалоговое создание рок-группы и тестирование разных параметров temperature.

## Возможности

- **Диалоговый режим создания рок-группы** — AI задаёт 5 уточняющих вопросов и формирует рекомендации
- **Режим сравнения temperature** — одновременная отправка запроса с температурами 0.0, 0.7, 1.0, 1.2
- **Информация о рок-группах** — получение структурированных данных в формате JSON
- **Управление сессией** — команды сброса и отслеживания прогресса

## Требования

- JDK 17 или выше
- Gradle 8.0+

## Установка

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd AiAdventChallenge
```

### 2. Настройка API ключа

Скопируйте пример конфигурации и добавьте ваш API ключ:

```bash
cp config.properties.example config.properties
```

Откройте `config.properties` и замените `YOUR_API_KEY_HERE` на ваш реальный ключ от Z.AI:

```properties
llm.z.api.key=ваш_ключ_здесь
```

> **Важно**: Файл `config.properties` добавлен в `.gitignore` и не попадёт в репозиторий.

### 3. Сборка проекта

```bash
./gradlew build
```

## Запуск

### Через Gradle

```bash
./gradlew run
```

### Собранный JAR

```bash
java -jar build/libs/AiAdventChallenge-1.0-SNAPSHOT.jar
```

## Использование

### Основные команды

После запуска вы увидите приглашение `Вы: `. Введите сообщение или команду:

| Команда | Описание |
|---------|----------|
| `создать рок-группу` | Запуск диалогового режима создания рок-группы |
| `подробнее` | Получить информацию о знаменитых рок-группах |
| `сброс` или `reset` | Сбросить текущую сессию |
| `exit`, `quit`, `выход` | Завершить работу |

### Пример диалога создания рок-группы

```
Вы: помоги создать рок-группу
Агент: Я задам вам 5 вопросов, чтобы помочь создать идеальную рок-группу.
        Вопрос 1 из 5
        Какой поджанр рока вам ближе всего?
```

### Режим сравнения temperature

Для любого запроса (не относящегося к созданию рок-группы) приложение отправляет 4 параллельных запроса с разной температурой:

```
Вы: расскажи о Beatles
Тест на ответ с разной степеней температуры у модели:
Отправка запроса с температурой 0.0...
[ответ 0.0]
Отправка запроса с температурой 0.7...
[ответ 0.7]
...
```

## Структура проекта

```
src/main/kotlin/
├── Main.kt                          # Точка входа
├── Constants.kt                     # Константы и загрузка конфига
├── ZAiClient.kt                     # HTTP-клиент для Z.AI API
├── Helper.kt                        # Вспомогательные функции
├── models/
│   ├── Models.kt                    # DTO для API
│   └── RockBandCreationSession.kt   # Состояние сессии
└── usecase/
    ├── CreatingRockBand.kt          # Use-case создания рок-группы
    ├── RockBandConversationManager.kt # Управление диалогом
    ├── GetRockGroupsUseCase.kt      # Получение данных о группах
    └── WelcomePrompt.kt             # Стандартный режим
```

## Запуск тестов

```bash
./gradlew test
```

Отчёт о тестировании:

```bash
./gradlew test --info
```

## Конфигурация

### Модели AI

Доступные модели (определены в `Constants.kt`):

| Константа | Модель | Описание |
|-----------|--------|----------|
| `glmModelSenior` | glm-4.6 | Самая мощная |
| `glmModelMiddle` | glm-4.5 | Средняя (используется по умолчанию) |
| `glmModelJunior` | glm-4.5-air | Быстрая |

### Timeouts

Настроены в `ZAiClient.kt`:
- Connect timeout: 120 секунд
- Request/Socket timeout: 300 секунд

## Troubleshooting

### Ошибка: API ключ не найден

```
Ошибка конфигурации: API ключ не найден или не настроен в config.properties
```

**Решение**: Убедитесь, что файл `config.properties` существует в корне проекта и содержит валидный ключ.

### Ошибка подключения к API

```
Ошибка подключения к API: ...
```

**Решение**: Проверьте интернет-соединение и валидность API ключа.

### Ошибка чтения ввода

В некоторых IDE может возникнуть проблема с чтением из `System.in`. Рекомендуется запускать из терминала.

## Лицензия

MIT License